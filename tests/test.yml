---
- hosts: Ubuntu
  become: yes
  remote_user: vagrant
  gather_facts: yes
  tasks:
  - include_role:
      name: ../../
    vars:
      input_role_os_distribution:               "{{ ansible_distribution }}"
      input_role_os_distribution_major_version: "{{ ansible_distribution_major_version }}"
      input_role_install_docker_compose:        yes    
  
  - name: Test command docker
    shell: command -v docker
    register: test_docker
    changed_when: false
    failed_when: test_docker.stdout == ""

  - name: Test command docker-compose
    shell: command -v docker-compose
    register: test_docker_compose
    changed_when: false
    failed_when: test_docker_compose.stdout == ""

- hosts: CentOS
  become: yes
  remote_user: vagrant
  gather_facts: yes
  tasks:
  - include_role:
      name: ../../
    vars:
      input_role_os_distribution:               "{{ ansible_distribution }}"
      input_role_os_distribution_major_version: "{{ ansible_distribution_major_version }}"
      input_role_install_docker_compose:        yes    
  
  # - name: Test command docker
  #   shell: command -v docker
  #   register: test_docker
  #   changed_when: false
  #   failed_when: test_docker.stdout == ""

  # - name: Test command docker-compose
  #   shell: command -v docker-compose
  #   register: test_docker_compose
  #   changed_when: false
  #   failed_when: test_docker_compose.stdout == ""

# - hosts: CentOS
#   become: yes
#   remote_user: vagrant
#   gather_facts: yes
  
#   tasks:
#     - include_role:
#         name: ../../
#       vars:
#         input_role_os_distribution: "{{ ansible_distribution }}"
#         input_role_repository_keys:
#         input_role_repositories:
#           - name: google-chrome
#             file: google-chrome
#             description: google-chrome
#             baseurl: http://dl.google.com/linux/chrome/rpm/stable/x86_64
#             gpgcheck: yes
#             enabled: yes
#             gpgkey: https://dl.google.com/linux/linux_signing_key.pub
#             state: present
#         input_role_packages_to_install:
#           - gcc
#           - google-chrome-stable
    
#     - name: Test command virtualbox
#       shell: command -v google-chrome
#       register: test_virtualbox
#       changed_when: false
#       failed_when: test_virtualbox.stdout == ""

#     - name: Test command vagrant
#       shell: command -v google-chrome
#       register: test_vagrant
#       changed_when: false
#       failed_when: test_vagrant.stdout == ""

# - hosts: RedHat
#   become: yes
#   remote_user: vagrant
#   gather_facts: yes
  
#   tasks:
#     - include_role:
#         name: ../../
#       vars:
#         input_role_os_distribution: "{{ ansible_distribution }}"
#         input_role_repository_keys:
#         input_role_repositories:
#           - name: google-chrome
#             file: google-chrome
#             description: google-chrome
#             baseurl: http://dl.google.com/linux/chrome/rpm/stable/x86_64
#             gpgcheck: yes
#             enabled: yes
#             gpgkey: https://dl.google.com/linux/linux_signing_key.pub
#             state: present
#         input_role_packages_to_install:
#           - gcc
#           - google-chrome-stable
    
#     - name: Test command virtualbox
#       shell: command -v google-chrome
#       register: test_virtualbox
#       changed_when: false
#       failed_when: test_virtualbox.stdout == ""

#     - name: Test command vagrant
#       shell: command -v google-chrome
#       register: test_vagrant
#       changed_when: false
#       failed_when: test_vagrant.stdout == ""